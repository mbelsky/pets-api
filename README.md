# HTTP & JS

Цель: научиться работать с сетью из JS

Данный репозиторий хранит код примитивного серверного приложения которое будет отвечать на запросы нашей web-страницы.

## Базовое знание

### Необходимая теория

 * что такое HTTP-протокол, 
 * HTTP-запрос, 
 * виды HTTP-запросов

### Первые шаги

Скачать репозиторий. Перейти в папку с проектом и выполнить:

```bash
# Для установки зависимостей проекта
npm install
# Для запуска сервера
npm run start:prod
```

После запуска сервер будет отвечать на HTTP-запросы отправленные на `http://localhost:3000/`. Для остановки работы сервера – Ctrl+C в терминале.

Список запросов которые поддерживает сервер:

Method  | Route             | Description
----    | ---               | ---
GET     | /cats             | Получить всех котиков
GET     | /cats/:id         | Детальная информация о коте
GET     | /cats/photo/:id   | Ссылка на фото кота. В запросе должен быть заголовок `x-api-key`, со значением `vzuh`
GET     | /cats/thread/:id  | Комментарии пользователей о котике. Здесь `id` – это id "темы", а не котика. Приходит в ответе запроса `/cats/:id`
POST    | /cats             | Добавление нового котика в список. Данные передаются в виде `application/json`

### Тестирование сервера и себя

Для удобного формирования запросов к серверу скачать приложение [Postman](https://www.getpostman.com/downloads/). Распаковать скачанный архив, установить и запустить приложение. Зарегистрировать аккаунт, подтвердить и войти.

Теперь можно проверить работоспособность описанных выше запросов. [Пример](/assets/postman-how-to.mov?raw=true) как это делать.

## AJAX

После того, как стало ясно что такое HTTP-запросы и как с ними жить осталось разобраться как с ними работать из JS.

### Теория

Глава 18.1 из "Подробного руководства по JS" Флэнагана + статья https://learn.javascript.ru/xmlhttprequest.

### Практика

На основе этого материала для имеющегося сервера написать веб-приложение:
 * Экран разделен на две части. Список слева и детали справа.
 * Слева – список всех котов.
 * Нажатие по элементу-коту инициирует к серверу запрос за детальной информацией и отображает её в правой части экрана:
   * пол
   * имя
   * возраст
   * фото
   * комментарии
 * В верху страницы форма для добавления нового питомца в список.

![front](/assets/front.png)

Разрабатывать проект в отдельной от сервера папке, в ветке `develop`, чтобы потом сделать pull-request в `master`.

## Вишенка

После того как HTTP-запросы и XMLHTTPRequest освоены, можно знакомиться с [fetch](http://learn.javascript.ru/fetch) и переписать реализацию с его использованием.

`fetch` работает на основе [Promis-ов](https://learn.javascript.ru/promise-basics), статья поможет понять как с этим работать.
